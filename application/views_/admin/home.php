<?php 
if ((strpos(strtolower($_SERVER['SCRIPT_NAME']), strtolower(basename(__FILE__)))) !== false) { // NOT FALSE if the script"s file name is found in the URL
    header('HTTP/1.0 403 Forbidden');
    die('<h2>Direct access to this page is not allowed.</h2>');
}

$script = <<< "JS"

	var homeLayout;function showHome(){homeLayout=mainTab.cells("home").attachLayout({pattern:"3T",cells:[{id:"a",header:!1,height:275},{id:"b",header:!0,text:"Event "+userLogged.locName},{id:"c",header:!0,text:"Info"}]}),dataView=homeLayout.cells("a").attachDataView({container:"data_container",type:{template:"<div style='text-align:center;padding-top:20px;cursor:pointer;'><img src='#path#' height='50' width='50' style='cursor:pointer' /><p>#title#</p></div>",width:.1717*contentWidth,height:120}}),homeLayout.cells("c").attachHTMLString("<div id='news' style='width:100%;height:100%'></div>"),reqJson(Home("getNews"),"POST",null,((e,t)=>{"success"===t.status&&$("#news").html(t.template)})),dataView.add({path:"./public/codebase/icons/info.png",title:"Info",id:"info"}),isHaveMenu("Dashboard")&&dataView.add({path:"./public/codebase/icons/dashboard.png",title:"Dashboard",id:"dashboard"}),isHaveMenu("Akses & Master")&&dataView.add({path:"./public/codebase/icons/key.png",title:"Akses & Master",id:"access"}),isHaveMenu("Human Resource")&&dataView.add({path:"./public/codebase/icons/hrd.png",title:"SDM & Akutansi",id:"hr"}),isHaveMenu("General Affair")&&dataView.add({path:"./public/codebase/icons/building.png",title:"Umum & K3L",id:"ga"}),isHaveMenu("Teknik & Pemeliharaan")&&dataView.add({path:"./public/codebase/icons/tools.png",title:"Teknik & Pemeliharaan",id:"technique"}),isHaveMenu("Dokumen Kontrol")&&dataView.add({path:"./public/codebase/icons/document_48.png",title:"Dokumen Kontrol",id:"doc"}),isHaveMenu("Others")&&dataView.add({path:"./public/codebase/icons/others.png",title:"Others",id:"other"}),isHaveMenu("Proyek Manajemen")&&dataView.add({path:"./public/codebase/icons/timeline.png",title:"Proyek Manajemen",id:"project"}),dataView.select("info"),dataView.attachEvent("onAfterSelect",(function(e){"info"==e?(sidebar.hideItem("trees"),sidebar.showItem("info"),sidebar.showItem("user"),$("#title-menu").html(toDay)):"access"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof accessAccordion&&accessAccordion()}),100)):"dashboard"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof dashboardAccordion&&dashboardAccordion()}),100)):"hr"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof hrAccordion&&hrAccordion()}),100)):"ga"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof affairAccordion&&affairAccordion()}),100)):"prod"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof productionAccordion&&productionAccordion()}),100)):"whs"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof whsAccordion&&whsAccordion()}),100)):"doc"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof docAccordion&&docAccordion()}),100)):"technique"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof tnpAccordion&&tnpAccordion()}),100)):"other"==e?(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof otherAccordion&&otherAccordion()}),100)):"project"==e&&(leftRightLayout.cells("a").expand(),setTimeout((()=>{"function"==typeof projectAccordion&&(projectAccordion(),projectManagerTab())}),100))}))}function showHolidays(e){let t=indoDate(e).split(" ");homeLayout.cells("b").setText("Daftar Hari Libur Nasional: "+t[1]+" "+t[2]),freeView=homeLayout.cells("b").attachDataView({container:"free_container",type:{template:"<div style='width:100%;display:flex;flex-direction:column;justify-content:space-between,align-items:center'><span style='padding:5px;font-family:sans-serif'><img src='#path#' /> <b>#date#</b></span><div style='padding:5px;font-family:sans-serif'>#description#</div></div>",height:50},autowidth:1}),reqJson(App("getHolidaysView"),"POST",{date:e},((e,t)=>{"success"===t.status&&t.data.length>0&&t.data.map((e=>freeView.add(e)))}))}setTimeout((()=>{showHome(),currDate=new Date,showHolidays(currDate)}),500);

JS;

header('Content-Type: application/javascript');
echo $script;

