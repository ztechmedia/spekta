<?php 
if ((strpos(strtolower($_SERVER['SCRIPT_NAME']), strtolower(basename(__FILE__)))) !== false) { // NOT FALSE if the script"s file name is found in the URL
    header('HTTP/1.0 403 Forbidden');
    die('<h2>Direct access to this page is not allowed.</h2>');
}

$script = <<< "JS"
	
    function showReportOvertime(){var t=legendGrid(),e=mainTab.cells("other_report_overtime").attachTabbar({tabs:[{id:"a",text:"Report Lembur",active:!0},{id:"b",text:"Report Lembur Bagian"},{id:"c",text:"Report Lembur Sub Bagian"},{id:"d",text:"Report Lembur Karyawan"}]}),r=e.cells("a").attachToolbar({icon_path:"./public/codebase/icons/",items:[{id:"refresh",text:"Refresh",type:"button",img:"refresh.png"},{id:"export",text:"Export To Excel",type:"button",img:"excel.png"},{id:"review",text:"Ulasan Pencapaian Lembur",type:"button",img:"certificate.png"}]});3!=userLogged.rankId&&4!=userLogged.rankId&&r.disableItem("review");let a=filterForMonth(new Date);e.cells("a").attachMenu({icon_path:"./public/codebase/icons/",items:[{id:"search",text:"<div style='width:100%'>Search: <input type='text' id='other_start_ovt_report' readonly value='"+a.start+"' /> - <input type='text' id='other_end_ovt_report' readonly value='"+a.end+"' /> <button id='other_btn_ftr_ovt_report'>Proses</button>"}]}),new dhtmlXCalendarObject(["other_start_ovt_report","other_end_ovt_report"]);$("#other_btn_ftr_ovt_report").on("click",(function(){checkFilterDate($("#other_start_ovt_report").val(),$("#other_end_ovt_report").val())&&(s(),d(),f(),b())})),r.attachEvent("onClick",(function(t){switch(t){case"refresh":s(),d(),f(),b();break;case"export":i.toExcel("./public/codebase/grid-to-excel-php/generate.php"),sAlert("Export Data Dimulai");break;case"review":if(!i.getSelectedRowId())return eAlert("Pilih lemburan yang akan di ulas");let t=i.cells(i.getSelectedRowId(),2).getValue();var e=createWindow("review_overtime_win","Ulasan Pencapaian Lembur "+t,1100,700);myWins.window("review_overtime_win").skipMyCloseEvent=!0;var r=e.attachLayout({pattern:"3U",cells:[{id:"a",header:270},{id:"b",header:!1},{id:"c",header:!1}]});reqJson(Overtime("getOvertimeDetailViewRev"),"POST",{taskId:t},((t,e)=>{"success"===e.status&&r.cells("a").attachHTMLString(e.template)})),r.cells("c").progressOn();var a=r.cells("c").attachGrid();a.setImagePath("./public/codebase/imgs/"),a.setImagePath("./public/codebase/imgs/"),a.setHeader("No,Nama Karyawan,Sub Bagian,Bagian,Sub Unit,Tugas Lembur,Jam Efektif,Jam Istirahat,Jam Ril,Jam Lembur,Nominal Overtime,Biaya Makan"),a.attachHeader("#rspan,#text_filter,#select_filter,#select_filter,#select_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter"),a.setColSorting("int,str,str,str,str,str,str,str,str,str,str,str"),a.setColAlign("center,left,left,left,left,left,left,left,left,left,left,left"),a.setColTypes("rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt"),a.setInitWidthsP("5,20,20,20,20,30,10,10,10,10,15,15"),a.attachFooter(",Total Summary,#cspan,#cspan,#cspan,#cspan,#stat_total,#stat_total,#stat_total,#stat_total,<div id='other_total_ovt_rev'>0</div>,<div id='other_total_meal_ovt_rev'>0</div>"),a.enableSmartRendering(!0),a.attachEvent("onXLE",(function(){r.cells("c").progressOff()})),a.init(),a.clearAndLoad(Overtime("getReportOvertimeEmpGridRev",{equal_task_id:t,equal_status:"CLOSED"}),(function(){sumGridToElement(a,10,"other_total_ovt_rev"),sumGridToElement(a,11,"other_total_meal_ovt_rev")}));var o=r.cells("b").attachForm([{type:"fieldset",offsetTop:30,offsetLeft:30,label:"Ulasan ASMAN Terkait",list:[{type:"hidden",name:"task_id",labelWidth:130,inputWidth:250,required:!0,value:t},{type:"input",name:"overtime_review",label:"Komentar",labelWidth:130,inputWidth:250,required:!0,rows:4},{type:"block",offsetTop:30,list:[{type:"button",name:"update",className:"button_update",offsetLeft:15,value:"Simpan"},{type:"newcolumn"},{type:"button",name:"cancel",className:"button_no",offsetLeft:30,value:"Cancel"}]}]}]);o.attachEvent("onButtonClick",(function(t){switch(t){case"update":if(!o.validate())return eAlert("Input error!");setDisable(["update","clear"],o,r.cells("b"));let t=new dataProcessor(Overtime("updateOvertimeReview"));t.init(o),o.save(),t.attachEvent("onAfterUpdate",(function(t,e,a,l){let i=l.getAttribute("message");switch(e){case"updated":sAlert(i),s(),clearAllForm(o),setEnable(["update","clear"],o,r.cells("b")),closeWindow("review_overtime_win");break;case"error":eAlert(i),setEnable(["update","clear"],o,r.cells("b"))}}));break;case"cancel":closeWindow("review_overtime_win")}}))}})),e.cells("b").attachMenu({icon_path:"./public/codebase/icons/",items:[{id:"export",text:"Export To Excel",img:"excel.png"}]}).attachEvent("onClick",(function(t){switch(t){case"export":c.toExcel("./public/codebase/grid-to-excel-php/generate.php"),sAlert("Export Data Dimulai")}})),e.cells("c").attachMenu({icon_path:"./public/codebase/icons/",items:[{id:"export",text:"Export To Excel",img:"excel.png"}]}).attachEvent("onClick",(function(t){switch(t){case"export":v.toExcel("./public/codebase/grid-to-excel-php/generate.php"),sAlert("Export Data Dimulai")}})),e.cells("d").attachMenu({icon_path:"./public/codebase/icons/",items:[{id:"export",text:"Export To Excel",img:"excel.png"}]}).attachEvent("onClick",(function(t){switch(t){case"export":x.toExcel("./public/codebase/grid-to-excel-php/generate.php"),sAlert("Export Data Dimulai")}}));let o=e.cells("a").attachStatusBar();function l(){var e=i.getRowsNum();o.setText("Total baris: "+e+" ("+t.report_overtime+")");let r=sumGridToElement(i,20,"other_total_ovt_report","other_grand_total_ovt_report"),a=sumGridToElement(i,22,"other_total_meal_ovt_report","other_grand_total_meal_ovt_report");$("#other_grand_total_all_ovt_report").html("Rp. "+numberFormat(r+a))}var i=e.cells("a").attachGrid();function s(){e.cells("a").progressOn();let t={equal_status:"CLOSED",betweendate_overtime_date:$("#other_start_ovt_report").val()+","+$("#other_end_ovt_report").val()};i.clearAndLoad(Overtime("getReportOvertimeGrid",t),l)}i.setImagePath("./public/codebase/imgs/"),i.setHeader("No,Task ID,No. Memo Lembur,Nama Karyawan,Bagian Personil,Sub Bagian Personil,Bagian Penyelenggara,Sub Bagian Penyelenggara,Nama Mesin #1,Nama Mesin #2,Pelayanan,Tanggal Overtime,Waktu Mulai,Waktu Selesai,Status Hari,Jam Efektif,Jam Istirahat,Jam Ril,Jam Lembur,Premi,Nominal Overtime,Makan,Biaya Makan,Status Overtime,Ulasan Pencapaian Lembur,Created At"),i.attachHeader("#rspan,#text_filter,#text_filter,#text_filter,#select_filter,#select_filter,#select_filter,#select_filter,#select_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#select_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter"),i.setColSorting("int,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str,str"),i.setColAlign("center,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left,left"),i.setColTypes("rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt"),i.setInitWidthsP("5,20,20,20,20,20,20,20,15,15,15,15,15,15,10,10,10,10,10,10,15,5,15,10,30,25"),i.attachFooter(",Total Summary,#cspan,#cspan,#cspan,#cspan,#cspan,#cspan,#cspan,#cspan,#cspan,#cspan,#cspan,#cspan,#cspan,#stat_total,#stat_total,#stat_total,#stat_total,,<div id='other_total_ovt_report'>0</div>,,<div id='other_total_meal_ovt_report'>0</div>,,,"),i.attachFooter(",Total Biaya Lembur,<div id='other_grand_total_ovt_report'>0</div>"),i.attachFooter(",Total Biaya Makan,<div id='other_grand_total_meal_ovt_report'>0</div>"),i.attachFooter(",Grand Total,<div id='other_grand_total_all_ovt_report'>0</div>"),i.enableSmartRendering(!0),i.attachEvent("onXLE",(function(){e.cells("a").progressOff()})),i.attachEvent("onRowSelect",(function(t,e){3!=userLogged.rankId&&4!=userLogged.rankId||userLogged.subDepartment!=i.cells(t,4).getValue()?r.disableItem("review"):r.enableItem("review")})),i.init(),s();let _=e.cells("b").attachStatusBar();function n(){var t=c.getRowsNum();_.setText("Total baris: "+t);let e=sumGridToElement(c,7,"other_total_ovt_report_sub","other_grand_total_ovt_report_sub"),r=sumGridToElement(c,8,"other_total_meal_ovt_report_sub","other_grand_total_meal_ovt_report_sub");$("#other_grand_total_all_ovt_report_sub").html("Rp. "+numberFormat(e+r))}var c=e.cells("b").attachGrid();function d(){e.cells("b").progressOn();let t={equal_status:"CLOSED",betweendate_overtime_date:$("#other_start_ovt_report").val()+","+$("#other_end_ovt_report").val(),groupby_sub_department_id:!0};c.clearAndLoad(Overtime("getReportOvertimeSubGrid",t),n)}c.setImagePath("./public/codebase/imgs/"),c.setHeader("No,Bagian,Sub Unit,Jam Efektif,Jam Istirahat,Jam Ril,Jam Lembur,Nominal Overtime,Biaya Makan"),c.attachHeader("#rspan,#select_filter,#select_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter"),c.setColSorting("int,str,str,str,str,str,str,str,str"),c.setColAlign("center,left,left,left,left,left,left,left,left"),c.setColTypes("rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt"),c.setInitWidthsP("5,20,20,10,10,10,10,13,13"),c.attachFooter(",Total Summary,#cspan,#stat_total,#stat_total,#stat_total,#stat_total,<div id='other_total_ovt_report_sub'>0</div>,<div id='other_total_meal_ovt_report_sub'>0</div>"),c.attachFooter(",Total Biaya Lembur,<div id='other_grand_total_ovt_report_sub'>0</div>"),c.attachFooter(",Total Biaya Makan,<div id='other_grand_total_meal_ovt_report_sub'>0</div>"),c.attachFooter(",Grand Total,<div id='other_grand_total_all_ovt_report_sub'>0</div>"),c.enableSmartRendering(!0),c.attachEvent("onXLE",(function(){e.cells("b").progressOff()})),c.init(),d();let p=e.cells("c").attachStatusBar();function m(){var t=v.getRowsNum();p.setText("Total baris: "+t);let e=sumGridToElement(v,7,"other_total_ovt_report_div","other_grand_total_ovt_report_div"),r=sumGridToElement(v,8,"other_total_meal_ovt_report_div","other_grand_total_meal_ovt_report_div");$("#other_grand_total_all_ovt_report_div").html("Rp. "+numberFormat(e+r))}var v=e.cells("c").attachGrid();function f(){e.cells("c").progressOn();let t={equal_status:"CLOSED",betweendate_overtime_date:$("#other_start_ovt_report").val()+","+$("#other_end_ovt_report").val(),groupby_division_id:!0};v.clearAndLoad(Overtime("getReportOvertimeDivGrid",t),m)}v.setImagePath("./public/codebase/imgs/"),v.setHeader("No,Sub Bagian,Bagian,Jam Efektif,Jam Istirahat,Jam Ril,Jam Lembur,Nominal Overtime,Biaya Makan"),v.attachHeader("#rspan,#select_filter,#select_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter"),v.setColSorting("int,str,str,str,str,str,str,str,str"),v.setColAlign("center,left,left,left,left,left,left,left,left"),v.setColTypes("rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt"),v.setInitWidthsP("5,20,20,10,10,10,10,15,15"),v.attachFooter(",Total Summary,#cspan,#stat_total,#stat_total,#stat_total,#stat_total,<div id='other_total_ovt_report_div'>0</div>,<div id='other_total_meal_ovt_report_div'>0</div>"),v.attachFooter(",Total Biaya Lembur,<div id='other_grand_total_ovt_report_div'>0</div>"),v.attachFooter(",Total Biaya Makan,<div id='other_grand_total_meal_ovt_report_div'>0</div>"),v.attachFooter(",Grand Total,<div id='other_grand_total_all_ovt_report_div'>0</div>"),v.enableSmartRendering(!0),v.attachEvent("onXLE",(function(){e.cells("c").progressOff()})),v.init(),f();let u=e.cells("d").attachStatusBar();function h(){var t=x.getRowsNum();u.setText("Total baris: "+t);let e=sumGridToElement(x,9,"other_total_ovt_report_emp","other_grand_total_ovt_report_emp"),r=sumGridToElement(x,10,"other_total_meal_ovt_report_emp","other_grand_total_meal_ovt_report_emp");$("#other_grand_total_all_ovt_report_emp").html("Rp. "+numberFormat(e+r))}var x=e.cells("d").attachGrid();function b(){e.cells("d").progressOn();let t={equal_status:"CLOSED",betweendate_overtime_date:$("#other_start_ovt_report").val()+","+$("#other_end_ovt_report").val(),groupby_emp_id:!0};x.clearAndLoad(Overtime("getReportOvertimeEmpGrid",t),h)}x.setImagePath("./public/codebase/imgs/"),x.setHeader("No,Nama Karyawan,Sub Bagian,Bagian,Sub Unit,Jam Efektif,Jam Istirahat,Jam Ril,Jam Lembur,Nominal Overtime,Biaya Makan"),x.attachHeader("#rspan,#text_filter,#select_filter,#select_filter,#select_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter,#text_filter"),x.setColSorting("int,str,str,str,str,str,str,str,str,str,str"),x.setColAlign("center,left,left,left,left,left,left,left,left,left,left"),x.setColTypes("rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt,rotxt"),x.setInitWidthsP("5,20,20,20,20,10,10,10,10,15,15"),x.attachFooter(",Total Summary,#cspan,#cspan,#cspan,#stat_total,#stat_total,#stat_total,#stat_total,<div id='other_total_ovt_report_emp'>0</div>,<div id='other_total_meal_ovt_report_emp'>0</div>"),x.attachFooter(",Total Biaya Lembur,<div id='other_grand_total_ovt_report_emp'>0</div>"),x.attachFooter(",Total Biaya Makan,<div id='other_grand_total_meal_ovt_report_emp'>0</div>"),x.attachFooter(",Grand Total,<div id='other_grand_total_all_ovt_report_emp'>0</div>"),x.enableSmartRendering(!0),x.attachEvent("onXLE",(function(){e.cells("d").progressOff()})),x.init(),b()}

JS;

header('Content-Type: application/javascript');
echo $script;